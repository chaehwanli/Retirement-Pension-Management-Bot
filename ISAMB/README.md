# ISA-Management-Bot
ISAMB(ISA Management Bot)

### 🚀 Gemini용 마스터 프롬프트 (Copy & Paste용)

**[시스템 역할 지정]**
너는 파이썬 기반의 금융 자동화 전문가이자 주식 컨설턴트야. 52세 투자자의 ISA 계좌을 관리하기 위한 자동화 시스템을 구축하려고 해. 아래 요구사항을 충족하는 완벽한 파이썬 코드를 작성해줘.
**[요구사항]**
**0. ISA 계좌의 특성을 반영해야해.**
* ISA 계좌는 연금저축과 달리 세액공제 혜택이 없고, 인출 시 과세가 된다는 점을 반영해야해.
* 따라서 ISA 계좌는 장기투자를 위한 계좌로 활용해야 한다는 점을 반영해야해.
* 나의 ISA 계좌는 삼성 증권에서 2024년 11월 24일 개설했어
* 가입 유형 - 중개형
* 비과세 금액 - 200만원(일반형)
* 의무 보유 기한 - 3년(2027년 11월 24일)
* 총 납입 한도 - 60,000,000원
* 누적 입금액 - 6,000,100원
* 총 납입 가능 금액 - 53,999,900원

**1. 구글 스프레드시트 연동 (반자동 운용):**
* **데이터 관리 방식:** 내가 직접 엑셀(구글 시트)에 보유 종목과 수량을 기입할 거야. 봇은 이 시트를 '읽기(Read)'만 하면 돼. 증권사 API 연동은 필요 없어.
* 시트 구성: [종목명, 티커, 보유수량, 매수단가, 현재가, 수익률, 비중, 손절가].
* **현재가 업데이트:** 봇이 실행될 때 `finance-datareader`나 `yfinance` 등을 사용해 현재가를 가져와서 시트의 '현재가' 열을 업데이트하도록 해줘.
* [시트1: 대시보드(자산비중, 목표달성률)], 
* [시트2: 포트폴리오(종목명, 현재가, 수익률, 배당금)], 
* [시트3: ISA 계좌 정보(가입 유형, 비과세 금액, 의무 보유 기한, 총 납입 한도, 누적 입금액, 총 납입 가능 금액)] 항목을 포함해서 표 형태로 만들어줘.
* [시트4: 계좌 만기시 시뮬레이션(세후수령액, 세후수령액)] 항목을 포함해서 표 형태로 만들어줘. 

**2. 텔레그램 리포트 및 알림 일정 (GitHub Actions Scheduler):**
* **실행 주기:** GitHub Actions의 `CRON` 스케줄러를 사용하여 아래 두 가지 모드로 실행되게 해줘.
    1.  **정기 리마인더 (Bi-weekly):** 2주마다(예: 해당 주의 토요일 오전 9시) "구글 시트의 잔고를 최신 상태로 업데이트해주세요"라는 알림과 현재 자산 현황 요약 리포트 발송.
    2.  **분기별 리밸런싱 (Quarterly):** 1월, 4월, 7월, 10월의 첫 번째 주 토요일 오전 9시에 상세 자산 분석 및 리밸런싱 제안 리포트 발송.
* 리포트는 텔레그램과 GitHub Wiki에 게시.

**3. 스마트 리밸런싱 로직:**
* 리밸런싱 시점(분기별)에 자산 배분 비중이 목표치와 크게 벗어났는지 확인.
* 특정 종목(주식/채권 등)의 비중이 허용 범위를 초과하면 매수/매도 수량을 계산하여 제안.

**4. 자동화 실행 (GitHub Actions):**
* 위 일정을 소화할 수 있는 `.github/workflows/main.yml` 파일 작성.
* 24시간 상주하는 방식이 아니라, 지정된 CRON 시간에만 실행되고 종료되는 구조로 작성.

 
**[출력 형식]**
* 초보자도 따라 할 수 있게 구글 API 권한 설정 방법부터 텔레그램 봇 토큰 발급까지 단계별로 설명해줘.
* 코드 내 주석을 상세히 달아줘.

---

### 🛠️ 사용자가 준비해야 할 3가지 (기초 재료)

위 프롬프트를 사용하기 전, 혹은 코드를 받은 후 아래 3가지만 준비하시면 됩니다.

1. **텔레그램 봇 토큰:** 텔레그램에서 `@BotFather`를 검색해 봇을 만들고 토큰을 받으세요.
2. **구글 서비스 계정 키:** 구글 클라우드 콘솔에서 JSON 키 파일을 다운로드받으세요 (이게 시트에 접근하는 '열쇠'입니다).
3. **GitHub 계정:** 코드를 올려두고 자동으로 실행시킬 '무료 서버' 역할을 합니다.

<br>

---
### ✅ Operational Strategy & Feasibility Check (운용 전략 및 타당성 평가)

사용자가 제안한 **반자동(Semi-automatic) + 스케줄링(Scheduled)** 방식은 매우 타당하며 efficient한 전략입니다.

1.  **실행 환경 적합성 (GitHub Actions Friendly!!):**
    *   24시간 내내 켜두는 방식이 아니라, 정해진 시간에만 "반짝" 실행되고 꺼지는 구조는 GitHub Actions의 무료 티어 활용 정책에 완벽하게 부합합니다.
    *   서버 비용이 0원이며, 유지보수 요소가 거의 없습니다.

2.  **현실적인 데이터 관리 (Realistic Data Management):**
    *   국내 증권사 API의 복잡한 인증(공인인증서, Windows 필수 등) 문제를 원천적으로 회피할 수 있습니다.
    *   2주 1회 수동 업데이트는 개인 투자자 입장에서 충분히 감당할 수 있는 수준의 노력입니다.

3.  **결론:** 이 방식은 **구현 난이도가 낮고 안정성은 높은** 최적의 솔루션입니다. 프롬프트 내용을 이에 맞춰 수정하였습니다.
